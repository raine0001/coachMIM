{% extends "base.html" %}
{% block content %}
  <style>
    .login-page-wrap {
      max-width: 520px;
      margin: 24px auto;
    }
    .login-fact-card {
      border: 1px solid #cfe3ff;
      background: linear-gradient(180deg, #f5faff 0%, #eef7ff 100%);
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 10px;
    }
    .login-fact-kicker {
      color: #175cd3;
      font-size: 0.82rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin: 0 0 4px;
    }
    .login-fact-title {
      margin: 0 0 6px;
      font-size: 1.08rem;
      font-weight: 700;
    }
    .login-fact-text {
      margin: 0 0 4px;
      font-size: 0.94rem;
      line-height: 1.4;
    }
    .login-fact-challenge {
      margin: 0;
      font-size: 0.9rem;
      color: #364152;
    }
    .login-helper-note {
      margin-top: 8px;
      margin-bottom: 0;
      font-size: 0.9rem;
      color: #364152;
    }
    .google-login-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border: 1px solid #d7dee7;
      border-radius: 8px;
      background: #fff;
      color: #17212b;
      text-decoration: none;
      padding: 10px 14px;
      font-weight: 600;
      margin-top: 10px;
    }
    .google-login-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: conic-gradient(#4285f4 0 25%, #34a853 25% 50%, #fbbc05 50% 75%, #ea4335 75% 100%);
    }
  </style>
  <div class="login-page-wrap">
  {% if login_fact %}
    <div class="login-fact-card">
      <p class="login-fact-kicker">MIM Brain + Health</p>
      <h2 class="login-fact-title">{{ login_fact.title }}</h2>
      <p class="login-fact-text">{{ login_fact.fact }}</p>
      <p class="login-fact-challenge">{{ login_fact.challenge }}</p>
    </div>
  {% endif %}
  <div class="card" style="max-width: 520px; margin: 0 auto;">
    <h1>Login</h1>
    <form method="post" action="{{ url_for('main.login') }}">
      <input type="hidden" name="next" value="{{ next or '' }}" />
      <div class="grid">
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" required />
        </div>
        <div>
          <label for="password">Password</label>
          <input id="password" name="password" type="password" required />
        </div>
      </div>
      <div style="margin-top: 12px;">
        <button type="submit">Login</button>
      </div>
      <p class="login-helper-note">After password check, CoachMIM sends a 6-digit verification code to your email.</p>
    </form>
    {% if google_login_enabled %}
      <a class="google-login-btn" href="{{ url_for('main.google_login_start', next=next or '') }}">
        <span class="google-login-dot" aria-hidden="true"></span>
        Continue with Google
      </a>
    {% endif %}
    <p class="muted" style="margin-top: 12px;">
      Need an account? <a href="{{ url_for('main.register') }}">Register</a>
    </p>
    <p class="muted" style="margin-top: 4px;">
      <a href="{{ url_for('main.lost_password') }}">Lost password?</a>
    </p>
  </div>
  </div>
{% endblock %}
